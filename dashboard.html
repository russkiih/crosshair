<!DOCTYPE html>
<html>
<head>
  <title>Crosshair Settings</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    
    body {
      background-color: #1f1f1f;
      color: #ffffff;
      padding: 20px;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
    }
    
    .settings-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-width: 100%;
    }
    
    .setting-group {
      background-color: #2d2d2d;
      border-radius: 8px;
      padding: 15px;
    }
    
    .setting-group h2 {
      font-size: 18px;
      margin-bottom: 15px;
      border-bottom: 1px solid #3d3d3d;
      padding-bottom: 5px;
    }
    
    .setting-row {
      display: flex;
      flex-direction: column;
      margin-bottom: 15px;
    }
    
    .setting-row label {
      margin-bottom: 5px;
    }
    
    .color-picker {
      -webkit-appearance: none;
      width: 100%;
      height: 40px;
      border: none;
      border-radius: 4px;
      background-color: transparent;
      cursor: pointer;
    }
    
    .size-slider {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: #3d3d3d;
      outline: none;
    }
    
    .size-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #7289da;
      cursor: pointer;
    }
    
    .style-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    
    .style-option {
      background-color: #3d3d3d;
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .style-option:hover {
      background-color: #4d4d4d;
    }
    
    .style-option.selected {
      border-color: #7289da;
      background-color: #4d4d4d;
    }
    
    .preview-container {
      text-align: center;
      padding: 20px;
      background-color: #2d2d2d;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .preview {
      position: relative;
      width: 100px;
      height: 100px;
      margin: 0 auto;
      background-color: #111111;
      border-radius: 8px;
    }
    
    .preview-crosshair {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 64px;
      height: 64px;
    }
    
    .preview-dot {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #ffffff;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .preview-cross {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }
    
    .preview-cross-h, .preview-cross-v {
      position: absolute;
      background: #ffffff;
    }
    
    .preview-cross-h {
      height: 2px;
      width: 16px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .preview-cross-v {
      width: 2px;
      height: 16px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .preview-circle {
      display: none;
      position: absolute;
      width: 12px;
      height: 12px;
      border: 2px solid #ffffff;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .apply-button {
      display: block;
      width: 100%;
      padding: 12px;
      background-color: #7289da;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .apply-button:hover {
      background-color: #5f73bc;
    }
    
    .keybind-settings {
      padding: 10px;
    }
    
    .keybind-dropdown {
      width: 100%;
      padding: 10px;
      background-color: #3d3d3d;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .keybind-dropdown option {
      background-color: #3d3d3d;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Crosshair Settings</h1>
  
  <div class="preview-container">
    <h2>Preview</h2>
    <div class="preview">
      <div class="preview-crosshair">
        <div class="preview-dot"></div>
        <div class="preview-cross">
          <div class="preview-cross-h"></div>
          <div class="preview-cross-v"></div>
        </div>
        <div class="preview-circle"></div>
      </div>
    </div>
  </div>
  
  <div class="settings-container">
    <div class="setting-group">
      <h2>Style</h2>
      <div class="style-options">
        <div class="style-option selected" data-style="dot">
          Dot
        </div>
        <div class="style-option" data-style="cross">
          Cross
        </div>
        <div class="style-option" data-style="circle">
          Circle
        </div>
        <div class="style-option" data-style="dot_circle">
          Dot + Circle
        </div>
      </div>
    </div>
    
    <div class="setting-group">
      <h2>Color</h2>
      <div class="setting-row">
        <label for="color-picker">Choose color</label>
        <input type="color" id="color-picker" class="color-picker" value="#FFFFFF">
      </div>
    </div>
    
    <div class="setting-group">
      <h2>Size</h2>
      <div class="setting-row">
        <label for="size-slider">Adjust size: <span id="size-value">4</span>px</label>
        <input type="range" id="size-slider" class="size-slider" min="1" max="10" value="4">
      </div>
    </div>
    
    <div class="setting-group">
      <h2>Thickness</h2>
      <div class="setting-row">
        <label for="thickness-slider">Adjust thickness: <span id="thickness-value">2</span>px</label>
        <input type="range" id="thickness-slider" class="size-slider" min="1" max="5" value="2">
      </div>
    </div>
    
    <div class="setting-group">
      <h2>Keybind</h2>
      <div class="setting-row">
        <label for="toggle-keybind">Show/Hide Crosshair Keybind</label>
        <select id="toggle-keybind" class="keybind-dropdown">
          <!-- Will be populated via JavaScript -->
        </select>
      </div>
    </div>
    
    <button class="apply-button">Apply Settings</button>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    // Elements
    const colorPicker = document.getElementById('color-picker');
    const sizeSlider = document.getElementById('size-slider');
    const sizeValue = document.getElementById('size-value');
    const thicknessSlider = document.getElementById('thickness-slider');
    const thicknessValue = document.getElementById('thickness-value');
    const styleOptions = document.querySelectorAll('.style-option');
    const applyButton = document.querySelector('.apply-button');
    const toggleKeybind = document.getElementById('toggle-keybind');
    
    // Preview elements
    const previewDot = document.querySelector('.preview-dot');
    const previewCross = document.querySelector('.preview-cross');
    const previewCircle = document.querySelector('.preview-circle');
    const previewCrossH = document.querySelector('.preview-cross-h');
    const previewCrossV = document.querySelector('.preview-cross-v');
    
    // Current settings
    let currentSettings = {
      color: '#FFFFFF',
      size: 4,
      thickness: 2,
      style: 'dot',
      toggleKey: 'F8'
    };
    
    // Update the preview
    function updatePreview() {
      // Update color
      previewDot.style.background = currentSettings.color;
      previewCrossH.style.background = currentSettings.color;
      previewCrossV.style.background = currentSettings.color;
      previewCircle.style.borderColor = currentSettings.color;
      
      // Update size for all styles
      previewDot.style.width = `${currentSettings.size}px`;
      previewDot.style.height = `${currentSettings.size}px`;
      
      // Update cross size
      previewCrossH.style.height = `${currentSettings.thickness}px`;
      previewCrossH.style.width = `${currentSettings.size * 4}px`;
      previewCrossV.style.width = `${currentSettings.thickness}px`;
      previewCrossV.style.height = `${currentSettings.size * 4}px`;
      
      // Update circle size - limit border width
      previewCircle.style.width = `${currentSettings.size * 3}px`;
      previewCircle.style.height = `${currentSettings.size * 3}px`;
      
      // Set border width based on thickness setting
      previewCircle.style.borderWidth = `${currentSettings.thickness}px`;
      
      // Update style
      previewDot.style.display = 'none';
      previewCross.style.display = 'none';
      previewCircle.style.display = 'none';
      
      switch (currentSettings.style) {
        case 'dot':
          previewDot.style.display = 'block';
          break;
        case 'cross':
          previewCross.style.display = 'block';
          break;
        case 'circle':
          previewCircle.style.display = 'block';
          break;
        case 'dot_cross':
          previewDot.style.display = 'block';
          previewCross.style.display = 'block';
          break;
        case 'dot_circle':
          // For dot+circle, keep dot size fixed and only adjust circle
          previewDot.style.width = '4px';
          previewDot.style.height = '4px';
          previewDot.style.display = 'block';
          previewCircle.style.display = 'block';
          // Use thickness setting for border in dot+circle too
          previewCircle.style.borderWidth = `${Math.min(2, currentSettings.thickness)}px`;
          break;
        default:
          previewDot.style.display = 'block';
          break;
      }
    }
    
    // Populate keybind dropdown
    async function populateKeybindDropdown() {
      try {
        const shortcuts = await ipcRenderer.invoke('get-valid-shortcuts');
        toggleKeybind.innerHTML = '';
        
        shortcuts.forEach(shortcut => {
          const option = document.createElement('option');
          option.value = shortcut;
          option.textContent = shortcut;
          toggleKeybind.appendChild(option);
        });
        
        // Set the current value if it exists in settings
        if (currentSettings.toggleKey) {
          toggleKeybind.value = currentSettings.toggleKey;
        }
      } catch (error) {
        console.error('Failed to get shortcuts:', error);
      }
    }
    
    // Initialize settings from main process
    ipcRenderer.on('init-settings', (event, settings) => {
      currentSettings = settings;
      
      // Update UI with saved settings
      colorPicker.value = settings.color;
      sizeSlider.value = settings.size;
      sizeValue.textContent = settings.size;
      
      // Set thickness slider if present in settings
      if (settings.thickness !== undefined) {
        thicknessSlider.value = settings.thickness;
        thicknessValue.textContent = settings.thickness;
      }
      
      // Update style selection
      styleOptions.forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.style === settings.style) {
          option.classList.add('selected');
        }
      });
      
      // Update preview
      updatePreview();
      
      // Initialize keybind dropdown
      populateKeybindDropdown();
    });
    
    // Event listeners
    colorPicker.addEventListener('input', () => {
      currentSettings.color = colorPicker.value;
      updatePreview();
    });
    
    sizeSlider.addEventListener('input', () => {
      currentSettings.size = parseInt(sizeSlider.value);
      sizeValue.textContent = sizeSlider.value;
      updatePreview();
    });
    
    thicknessSlider.addEventListener('input', () => {
      currentSettings.thickness = parseInt(thicknessSlider.value);
      thicknessValue.textContent = thicknessSlider.value;
      updatePreview();
    });
    
    styleOptions.forEach(option => {
      option.addEventListener('click', () => {
        styleOptions.forEach(o => o.classList.remove('selected'));
        option.classList.add('selected');
        currentSettings.style = option.dataset.style;
        updatePreview();
      });
    });
    
    toggleKeybind.addEventListener('change', () => {
      currentSettings.toggleKey = toggleKeybind.value;
    });
    
    applyButton.addEventListener('click', () => {
      ipcRenderer.send('update-settings', currentSettings);
    });
  </script>
</body>
</html> 